<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Narwallet</title>
    <link rel="stylesheet" href="css/hamb.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <div class="corner-logo logo-32">
    </div>

    <div class="app">
        <div class="app-header">
            <div class="app-header-contents">
                <div class="app-header-account-menu-container">
                    <div class="app-header-network-component-wrapper">
                        <div id="select-network" class="network-component pointer" title="Active Network">
                            <div class="network-indicator">
                                <li id="current-network-display-name" class="circle yellow">NEAR Testnet</li>
                                <div class="down-arrow"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="hamb">
            <svg width=24 height=28>
                <line id="top" x1=0 y1=2 x2=24 y2=2 />
                <line id="middle" x1=0 y1=12 x2=24 y2=12 />
                <line id="bottom" x1=0 y1=22 x2=24 y2=22 />
            </svg>
        </div>
        <aside>
            <div class="logo-128"></div>
            <nav>
                <hr>
                <li id="lock">Lock</li>
                <hr>
                <!--<li id="expand">Expand</li>
                <hr>
                -->
                <li id="accounts">Accounts</li>
                <hr>
                <li id="add-account">Add Account</li>
                <hr>
                <!--<li id="change-password">Change your password</li>
                <hr>-->
                <li id="create-user">Create a new User</li>
                <hr>
                <li id="options">Options</li>
                <hr>
                <li id="contact">Contact</li>
                <hr>
                <li id="about">About</li>
                <hr>
            </nav>
        </aside>

        <div class="app-contents">

            <!-- WELCOME New user, onboarding-->
            <div id="welcome-new-user-page" class="page slide-hide">
                <div class="contents-body">
                    <h1>Welcome to Narwallets!</h1>
                    <h2>The future is NEAR</h2>
                    <h2>Let's start our journey</h2>
                    <div class="select-action-button-box">
                        <p>
                            <b>Step one:</b><br> Create user and password to protect this wallet
                        </p>
                        <button id="welcome-create-pass" class="btn-primary">Create User &amp; Password</button>
                    </div>
                </div>
            </div>

            <!-- New User create pass-->
            <div id="create-user" class="page slide-hide">
                <h1>Create User</h1>
                <form class="create-pass-form">
                    <div class="form-field-label">
                        <label data-shrink="true" for="email">Your e-mail</label>
                        <div class="form-control">
                            <input type="text" tabindex="0" autocomplete="email" id="email" />
                        </div>
                    </div>
                    <div class="form-field-label">
                        <label class="" data-shrink="true" for="pass" id="create-password-label">New password (min 8
                            chars)</label>
                        <div class="form-control">
                            <input type="password" autocomplete="new-password" type="password" id="pass" >
                        </div>
                    </div>
                    <div class="form-field-label">
                        <label class="form-field-label" data-shrink="true" for="pass-confirm"
                            id="confirm-password-label">Confirm password</label>
                        <div class="form-control">
                            <input type="password" autocomplete="new-password" id="pass-confirm">
                        </div>
                    </div>
                    <div class="checkbox-container">
                        <input id="agree-check" type="checkbox" bind:checked aria-checked="false"
                            aria-labelledby="checkbox-label" />
                        <label for="checkbox" class="checkbox-label">
                            I have read and agree to the
                            <a href=# id="open-terms-of-use">Terms of
                                Use
                            </a>
                        </label>
                    </div>
                    <div class="center">
                        <button class="btn-primary" id="create-user">Create
                        </button>
                    </div>
                </form>

            </div>

            <!-- Add Account, Import or Create ? -->

            <div id="import-or-create" class="page slide-hide">

                <div class="contents-header">
                    <h1>Do you have a NEAR account?</h1>
                </div>
                <div class="select-action-wrapper">
                    <div class="select-action-button-box">
                        <div class="text-big">Yes, I already have a NEAR account</div>
                        <div class="text-small">Import your existing account</div>
                        <button id="option-import" class="btn-primary wide">Import existing account</button>
                    </div>
                    <div disabled="" class="select-action-button-box">
                        <div class="text-big">No, create a new <i>named</i> account</div>
                        <div class="text-small">This will create a new NEAR <i>named</i> account, you can choose the account name, but <b>you'll need to send 3 NEAR to complete account creation</b></div>
                        <button id="option-create" class="btn-primary wide">Create Named Account</button>
                    </div>
                    <div disabled="" class="select-action-button-box">
                        <div class="text-big">No, create a new <i>implicit</i> account</div>
                        <div class="text-small">This will create a new NEAR <i>implicit</i> account. It's free to create but it's a large string of numbers</div>
                        <button id="option-create-implicit" class="btn-primary wide">Create Implicit Account</button>
                    </div>
                </div>

            </div>


            <!-- Import Account -->
            <div id="import-account" class="page slide-hide">
                <h1>Import existing account</h1>
                <form class="import-form">
                    <div class="form-field-label">
                        <label for="search-account-name">Search Account Name</label>
                        <div class="form-control">
                            <input id="search-account-name" type="text" class="with-inside-button">
                            <button id="net-root" class="button inside-input normal-font" disabled="">.guildnet</button>
                        </div>
                    </div>
                    <div class="form-field-label">
                        <label for="yes-no-search-pools">
                            Have you staked from this account or its lockup?
                        </label>
                        <div class="form-control" id="yes-search-pools">
                            <input id="yes-search-the-pools" type="radio" name="search-the-pools" checked>
                            <label for="yes-search-the-pools">Yes, search the pools</label>
                        </div>
                        <div class="form-control">
                            <input id="no-search-the-pools" type="radio" name="search-the-pools">
                            <label for="no-search-the-pools">No, do not search the pools</label>
                        </div>
                    </div>

                    <button id="search" class="button btn-primary medium">
                        Search Account in&nbsp;<span id="net-name"></span>
                    </button>

                    <!-- IMPORT: SHOW DATA BEFORE IMPORT-->
                    <div id="account-search-results" class="hidden">
                        <div id="searched-account-info" class="hidden">
                        </div>
                        <div id="searched-lockup-account-info" class="hidden">
                        </div>
                        <div id="account-get-message-line" class="hidden flex-labeled-row">
                            <label>Msg</label>
                            <div id="account-get-message" class=""></div>
                        </div>
                    </div>


                    <!-- Template -->
                    <div id="search-info-account-template" class="hidden  account-info flex-labeled-container">
                        <div id="account-line" class="flex-labeled-row small-labels">
                            <div class="name">{name}</div>
                            <div class="balance">{accountInfo.lastBalance}</div>
                        </div>
                        <div id="staking-pool-info-line" class="flex-labeled-row small-labels hidden">
                            <div class="name">At Pool {accountInfo.stakingPool}</div>
                            <div class="balance">{inThePool}</div>
                        </div>
                    </div>

                    <button id="import" class="button btn-primary medium hidden">
                        Import Account into this Wallet
                    </button>
                </form>
            </div>


            <!-- Existing user, unlock-->
            <div id="unlock" class="page slide-hide">
                <div class="logo-128"></div>
                <h1>Welcome Back!</h1>
                <h3>Please enter user and password to unlock this wallet</h3>
                <div class="enter-pass">
                    <div class="form-field-label">
                        <label for="email">Your e-mail</label>
                        <div class="form-control">
                            <input type="text" tabindex="0" autocomplete="email" id="unlock-email">
                        </div>
                    </div>
                    <div class="form-field-label">
                        <label for="unlock-pass">Password</label>
                        <div class="form-control">
                            <input autocomplete="new-password" id="unlock-pass" type="password">
                        </div>
                    </div>
                </div>
                <button id="unlock" class="button btn-primary ultrabig">Unlock</button>
            </div>

            <!-- Unlocked, Main Pag, All Accounts -->
            <div id="main-page" class="page slide-hide">
                <h2>Wallet Accounts</h2>
                <div id="accounts-list">
                </div>
                <div class="total-row">
                    <div class="account-item-group">
                        <div class="name total">Total</div>
                        <div class="balance total"></div>
                    </div>
                </div>
                <div class="footer-buttons">
                    <div class="button-group no-top-line">
                        <button id="add-account" class="small">Add Account</button>
                    </div>
                    <div class="button-group" id="disconnect-line">
                        <button id="disconnect-from-web-page" class="small">Disconnect from web page</button>
                    </div>
                </div>
            </div>

            <!-- Unlocked, SECURITY OPTIONS -->
            <div id="security-options" class="page slide-hide">
                <h2>Security Options</h2>
                <div id="list" class="options-list">
                    <div class="flex-row">
                        <input type="checkbox" id="advanced-mode" value="">
                        <label for="advanced-mode">Advanced User</label>
                        <div class="flex-padding" style="flex: 1 0 auto;"></div>
                    </div>
                    <div class="explanation">Show advanced options as: Show public key, Add public key to a Lockup
                        contract and Delete Account</div>
                    <div class="flex-row">
                        <label for="auto-unlock-seconds" style="
                                text-align: right;
                                padding-right: 10px;
                                flex: 0 1 25%;">Auto-Lock (seconds): </label>
                        <input id="auto-unlock-seconds" type="number">
                        <div class="flex-padding" style="flex: 1 0 auto;"></div>
                    </div>
                    <div class="explanation">The wallet will auto-lock after x seconds of you closing the popup extension</div>
                    <div class="flex-row">
                        <button id="save-settings" class="small">Save Settings</button>
                        <button id="cancel-security-settings" class="small btn-cancel">Cancel</button>
                    </div>
                </div>
            </div>


            <!-- All Accounts page, Account Item Template -->
            <div id="account-item-template" class="hidden account-item" data-id="{name}">
                <div class="account-item-group">
                    <div class="type">{type}</div>
                    <div class="name">{name}</div>
                    <div class="balance">{total}</div>
                </div>
                <div class="account-item-group staked hidden">
                    <div class="staked"></div>
                    <div class="available"></div>
                </div>
                <div class="account-item-group available hidden">
                    <div class="balance">{available}</div>
                </div>
                <div class="account-item-group staking-pool hidden">
                    <div class="stakingpool">{accountInfo.stakingPool}</div>
                </div>
            </div>

            <!-- Unlocked, Single Account Selected Page -->
            <div id="account-selected" class="account-selected page slide-hide">
                <header class="back-link">Back to Accounts</header>
                <div id="selected-account" class="selected-account-info">
                </div>

                <!-- Template -->
                <div id="selected-account-template" class="hidden">
                    <div class="single-account-item-group">
                        <label>{typeFull}</label><br>
                        <div class="access-status">{accessStatus}</div>
                    </div>
                    <div class="single-account-item-group">
                        <div class="name">{name}</div>
                    </div>
                    <div id="owner-id-info-line" class="hidden single-account-item-group small-labels">
                        <label>Owner</label>
                        <div>{accountInfo.ownerId}</div>
                    </div>
                    <div id="locked-others-line" class="hidden single-account-item-group small-labels">
                        <label>Locked</label>
                        <div class="balance">{accountInfo.lockedOther}</div>
                        <label>Unlocked</label>
                        <div class="balance">{unlockedOther}</div>
                    </div>
                    <div id="staking-pool-info-line" class="hidden single-account-item-group small-labels">
                        <label>Staking Pool</label>
                        <div>{accountInfo.stakingPool} ({accountInfo.stakingPoolPct}%)</div>
                        <label>Rewards</label>
                        <div class="balance">{accountInfo.rewards}</div>
                    </div>
                    <div id="staking-pool-balance-line" class="hidden single-account-item-group staked small-labels">
                        <label>Staked</label>
                        <div class="balance">{accountInfo.staked}</div>
                        <label>Unstaked</label>
                        <div class="balance">{accountInfo.unstaked}</div>
                    </div>
                    <div class="single-account-item-group small-labels">
                        <label>Balance</label>
                        <div class="total balance">{accountInfo.lastBalance}</div>
                        <label>Available</label>
                        <div class="balance">{available}</div>
                    </div>
                </div>

                <div class="footer-buttons">
                    <div id="account-selected-buttons" class="subpage">
                        <div class="button-group">
                            <button id="acc-connect-to-page" class="small">Connect to Web Page</button>
                            <button id="acc-disconnect-from-page" class="small">Disconnect Web Page</button>
                        </div>
                        <div class="button-group">
                            <button id="send">Send</button>
                            <button id="receive">Receive</button>
                        </div>
                        <div class="button-group">
                            <button id="stake" class="small">Deposit & Stake</button>
                            <button id="unstake" class="small">Unstake & Withdraw</button>
                        </div>
                        <div id="buttons-less" class="button-group">
                            <button id="refresh">Refresh</button>
                            <button id="moreless">More...</button>
                        </div>
                        <div class="buttons-more button-group hidden">
                            <button id="access" class="small">Change Access</button>
                            <button id="add-note" class="small">Add Note</button>
                        </div>
                        <div class="buttons-more button-group hidden">
                            <button id="search-pools" class="small">Search Pools</button>
                            <button id="explore" class="small">Explore Account</button>
                        </div>
                        <div class="buttons-more button-group hidden">
                            <button id="detailed-rewards" class="small" title="provided by near-staking.com">Detailed rewards</button>
                            <button id="remove" class="small">Remove from Wallet</button>
                        </div>
                        <div class="buttons-more advanced button-group hidden">
                            <button id="show-public-key" class="small">Show Public Key</button>
                            <button id="show-private-key" class="small">Show Private Key</button>
                        </div>
                        <div class="buttons-more advanced button-group hidden">
                            <button id="lockup-add-public-key" class="small">Lockup: Add Full Access Key</button>
                            <button id="delete-account" class="small">Delete Account</button>
                        </div>
                        <!--<div class="buttons-more advanced button-group hidden">
                            <button id="assign-staking-pool" class="small">Advanced: Assign staking-pool</button>
                        </div>
                        -->
                    </div>


                    <!-- subpage SEND -->
                    <div id="account-selected-send" class="subpage hidden">
                        <div class="title">
                            <h2>Send</h2>
                        </div>
                        <form class="send-form">
                            <div class="form-field-label">
                                <label for="send-to-account-name">
                                    Send to Account Id
                                </label>
                                <div class="form-control">
                                    <input  id="send-to-account-name" type="text" dir="auto"
                                        value="">
                                </div>
                            </div>
                            <div class="form-field-label">
                                <label for="send-to-account-amount">
                                    Amount in NEAR (Max. <span id="max-amount-send"></span>)
                                </label>
                                <div class="form-control">
                                    <input  id="send-to-account-amount" autocomplete="chrome-off" type="text" dir="auto"
                                        value="">
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- subpage SEND CONFIRMATION -->
                    <div id="account-selected-send-confirmation" class="subpage hidden">
                        <div class="title">
                            <h2>Confirm Send</h2>
                        </div>
                        <form class="send-form-confirmation">
                            <div class="subtitle">
                                <h3 class="warning">Send <span id="send-confirmation-amount"></span> NEAR
                                    to <span id="send-confirmation-receiver"></span> ?</h3>
                            </div>
                            <br>
                        </form>
                    </div>

                    <!-- subpage DELETE ACCOUNT -->
                    <div id="account-selected-delete" class="subpage hidden">
                        <div class="title">
                            <h2>Delete Account</h2>
                        </div>
                        <form class="delete-account">
                            <div class="form-field-label">
                                <label for="send-balance-to-account-name">
                                    Balance beneficiary Account Id
                                </label>
                                <div class="form-control">
                                    <input  id="send-balance-to-account-name" type="text" dir="auto"
                                        value="">
                                </div>
                            </div>
                            <div class="subtitle">
                                <h3 class="warning">WARNING: Deleting an account is irreversible.
                                    The account balance will be transferred to the beneficiary above.
                                    Please make sure the beneficiary account is correct</h3>
                            </div>
                            <div class="form-field-label">
                                <label for="delete-account-name-confirm">
                                    Type the account name you want to Delete to confirm
                                </label>
                                <div class="form-control">
                                    <input  placeholder="" id="delete-account-name-confirm"
                                        type="text" dir="auto" value="">
                                </div>
                            </div>
                        </form>
                        </form>
                    </div>

                    <!-- subpage STAKE -->
                    <div id="account-selected-stake" class="subpage hidden">
                        <div class="title">
                            <h2>Stake</h2>
                        </div>
                        <div class="form">
                            <div class="form-field-label">
                                <label for="stake-with-staking-pool">
                                    Deposit & Stake with this Staking Pool
                                </label>
                                <div class="form-control">
                                    <div class="flex-row">
                                        <input id="stake-with-staking-pool" type="text" class="with-inside-button">
                                        <button id="list-pools" class="button inside-input">List Pools</button>
                                    </div>
                                </div>
                            <div class="form-field-label">
                                <label for="stake-amount">
                                    Amount in NEAR to Stake (Max <span id="max-stake-amount"></span>)
                                </label>
                                <div class="form-control">
                                    <input id="stake-amount" type="text">
                                </div>
                              </div>
                            </div>
                        </div>
                    </div>

                    <!-- subpage UNSTAKE -->
                    <div id="account-selected-unstake" class="subpage hidden">
                        <div class="round-box bg-lightblue">
                            <div>Unstake & Withdraw <span id="unstake-ALL-label">ALL </span>from ?
                            </div>
                            <div id="unstake-from-staking-pool" class="important-label"></div>
                        </div>
                        <div id="option-unstake-withdraw" class="flex-row">
                            <div class="form-control" id="radios-unstake-withdraw">
                                <input id="radio-unstake" type="radio" name="radios-unstake-withdraw">
                                <label for="radios-unstake">Unstake</label>
                                <input id="radio-withdraw" type="radio" name="radios-unstake-withdraw" checked>
                                <label for="radio-withdraw">Withdraw</label>
                            </div>
                        </div>
                        <div class="form-field-label">
                            <label for="unstake-amount">
                                Amount in NEAR to Unstake/Withdraw
                            </label>
                            <div class="form-control">
                                <input id="unstake-amount" type="text">
                            </div>
                        </div>
                    </div>

                    <!-- subpage OPEN OWNER -->
                    <div id="account-selected-open-owner" class="subpage hidden">
                        <div class="round-box bg-lightblue">
                            <div>Open owner account ?</div>
                            <div id="account-selected-open-owner-name" class="important-label"></div>
                        </div>
                    </div>

                    <!-- subpage SHOW PUBLIC KEY -->
                    <div id="account-selected-show-public-key" class="subpage hidden">
                        <div class="round-box bg-lightblue">
                            <div>Your public key:</div>
                            <div id="account-selected-public-key" class="important-label"></div>
                        </div>
                    </div>
                    <!-- subpage SHOW PRIVATE KEY -->
                    <div id="account-selected-show-private-key" class="subpage hidden">
                        <div class="subtitle">
                            <h3>Please store the private key in a safe place. You WILL eventually need a seed phrase 
                                or this private key to regain acces to your funds.
                            <b>It's extremely important that you preserve your seed phrase or your private key</b></h3>
                        </div>
                        <div class="round-box bg-yellow">
                            <div>Your PRIVATE key <b>DO NOT SHARE!</b></div>
                            <div id="account-selected-private-key" class="important-label"></div>
                        </div>
                    </div>


                    <!-- subpage is OK to grant access? -->
                    <div id="account-selected-ok-to-grant-access" class="subpage hidden">
                        <div class="round-box bg-lightblue">
                            <div>Grant fulll access to this account ?</div>
                            <!--<div id="account-selected-open-owner-name" class="important-label"></div>-->
                        </div>
                    </div>

                    <!-- subpage RECEIVE -->
                    <div id="account-selected-receive" class="subpage hidden">
                        <div class="round-box bg-lightblue">
                            <div>Tell the other party to send to:</div>
                            <div id="account-selected-receive-name" class="important-label"></div>
                        </div>
                    </div>

                    <!-- subpage MAKE FULL ACCESS -->
                    <div id="account-selected-make-full-access" class="subpage hidden">
                        <div class="title">
                            <h2>Make Full Access</h2>
                        </div>
                        <div class="subtitle">
                            <h3>Enter the seed phrase (or private key)<br> for this account</h3>
                        </div>
                        <form class="seed-phrase-form">
                            <div class="form-field-label">
                                <label for="seed-phrase">
                                    Seed Phrase
                                </label>
                                <div class="form-control">
                                    <input autocomplete="off" placeholder="correct horse battery staple..."
                                        id="seed-phrase" type="text">
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- subpage MAKE READ ONLY -->
                    <div id="account-selected-make-read-only" class="subpage hidden">
                        <div class="title">
                            <h2>Make Read Only</h2>
                        </div>
                        <div class="subtitle">
                            <h3 class="warning">WARNING: Removing access means
                                you won't be able to access this account again
                                without the seed phrase. Please make sure you
                                have the seed phrase securely stored and available</h3>
                        </div>
                        <form class="make-read-only-form">
                            <div class="form-field-label">
                                <label for="account-name-confirm">
                                    Type the account name to confirm
                                </label>
                                <div class="form-control">
                                    <input  placeholder="" id="account-name-confirm" type="text"
                                        dir="auto" value="">
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- subpage ADD FAK TO LOCKUP -->
                    <div id="account-selected-add-public-key" class="subpage hidden">
                        <div class="title">
                            <h2>Add Full Access Key to Lockup</h2>
                        </div>
                        <div class="subtitle">
                            <h3>Owner's public key will be added as Full Access Key to this Lockup Contract Account</h3>
                        </div>
                        <!--<div class="subtitle">
                            <h3>Enter the Public Key to Add</h3>
                        </div>
                        <form class="public-key">
                            <div class="form-field-label">
                                <label for="add-public-key">
                                    New Public Key for Full Access
                                </label>
                                <div class="form-control">
                                    <input  placeholder="ed25519:..."
                                        id="add-public-key" type="text" dir="auto" value="">
                                </div>
                            </div>
                        </form>
                        -->
                    </div>

                    <!-- subpage ADD NOTE -->
                    <div id="account-selected-add-note" class="subpage hidden">
                        <div class="title">
                            <h2>Add Note to this account</h2>
                        </div>
                        <div class="subtitle">
                            <h3>Text will be displayed with the account type. Enter a small note</h3>
                        </div>
                        <!--<div class="round-box bg-lightblue">
                        </div>-->
                        <form class="public-key">
                            <div class="form-field-label">
                                <label for="add-note">
                                    Note:
                                </label>
                                <div class="form-control">
                                    <input id="add-note" type="text">
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- OK CANCEL buttons common to all subpages -->
                    <div class="button-group ok-cancel hidden">
                        <button id="account-selected-action-confirm" class="button btn-primary">
                            OK
                        </button>
                        <button id="account-selected-action-cancel" class="button btn-cancel">
                            Cancel
                        </button>
                    </div>

                </div>
            </div>


        </div> <!-- end app-contents -->
    </div> <!-- end app-->

    <!-- 
    Networks Dropdown 
    -->
    <div id="networks-list" class="networks-list-box">
        <div class="networks-list-content">
            <div class="network-box-header">
                <div class="title">Networks</div>
                <hr>
                <div class="messsage"></div>
            </div>
            <div id="network-items">
            </div>
        </div>
    </div>

    <!-- Network Item Template -->
    <div id="network-item-template" class="hidden">
        <div data-code="{name}" class="circle {color}">{displayName}</div>
    </div>

    <!-- -->
    <div id="err-div"></div>
    <!-- -->
    <div id="wait">
        <div class="lds-ring">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>

    <script src="bundled-libs.js"></script>
    <script type="module" src="dist/index.js"></script>

</body>

</html>